<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Consulta OLT Uberaba 2025</title>
    <style>
        body { font-family: 'Segoe UI', sans-serif; background-color: #121212; color: white; text-align: center; padding: 30px; }
        .container { max-width: 500px; margin: 0 auto; }
        input { padding: 12px; font-size: 18px; text-align: center; width: 70%; border-radius: 5px; border: none; }
        
        button { padding: 12px 20px; font-size: 18px; cursor: pointer; background-color: #007bff; color: white; border: none; border-radius: 5px; transition: 0.3s; }
        button:hover { background-color: #0056b3; }
        
        /* Estilo para a √°rea dos bot√µes de ferramentas */
        .ferramentas-container { 
            display: flex; 
            gap: 10px; 
            margin-top: 15px; 
            justify-content: center;
        }
        
        .btn-ferramenta { 
            background-color: #28a745; 
            flex: 1; 
            font-size: 14px; 
            padding: 10px;
        }
        .btn-ferramenta:hover { background-color: #1e7e34; }

        .card { background: #1e1e1e; margin-top: 20px; padding: 20px; border-radius: 10px; box-shadow: 0 4px 15px rgba(0,0,0,0.5); }
        .badge { display: inline-block; padding: 10px 20px; border-radius: 8px; font-weight: bold; font-size: 1.2em; margin-top: 15px; color: #fff; text-shadow: 1px 1px 3px rgba(0,0,0,0.8); }
        .info-bairro { font-size: 0.9em; color: #ccc; margin-top: 5px; }
        .aviso { color: #ffeb3b; border: 1px dashed #ffeb3b; padding: 15px; margin-top: 15px; text-align: left; }
    </style>
</head>
<body>

    <div class="container">
        <h2>üì° Localizador de OLT</h2>
        <div style="display: flex; gap: 5px; justify-content: center;">
            <input type="text" id="cep" placeholder="Digite o CEP" maxlength="9">
            <button onclick="verificar()">Buscar</button>
        </div>

        <div class="ferramentas-container">
            <button class="btn-ferramenta" onclick="abrir('https://tcftelecom.hubsoft.com.br/rede/rede/equipamento_conexao')">üåê Rede/Conex√£o</button>
            <button class="btn-ferramenta" onclick="abrir('https://tcftelecom.hubsoft.com.br/atendimento_os/agenda_tecnico')">üìÖ Agenda T√©cnico</button>
        </div>

        <div id="resultado"></div>
    </div>

    <script>
        // Fun√ß√£o simples para abrir links
        function abrir(url) {
            window.open(url, '_blank');
        }

        const baseDeDados = [
            {
                olt: "OLT MORUMBI",
                vlan: "1201",
                cor: "#555555",
                bairros: ["MORUMBI", "RESIDENCIAL MORUMBI", "PACAEMBU", "PACAEMBU II", "JARDIM COPACABANA", "BEIJA-FLOR", "BEIJA-FLOR II", "PORTAL BEIJA FLOR", "JARDIM ESPANHA", "NOVA ERA", "RESIDENCIAL NOVA ERA", "ALFREDO FREIRE", "CONJUNTO ALFREDO FREIRE", "ALFREDO FREIRE II", "ALFREDO FREIRE III", "JARDIM IMPERADOR", "PARQUE DOS GIRASSOIS", "VILA ARQUELAU", "Ch√°caras Mariitas"]
            },
            {
                olt: "OLT VIANA",
                vlan: "1203",
                cor: "#008000",
                bairros: ["MERC√äS", "SANTA MARIA", "UNIVERSIT√ÅRIO", "VILA CELESTE", "JARDIM UBERABA", "DISTRITO INDUSTRIAL I", "OLINDA", "JARDIM AM√âRICA", "VILA SAO VICENTE", "JARDIM SANTA CLARA", "PONTAL", "CONJUNTO PONTAL", "UNIVERDECIDADE","SANTA MARTA", "FABRICIO"]
            },
            {
                olt: "OLT PA",
                vlan: "1205",
                cor: "#0000CD",
                bairros: ["S√ÉO BENEDITO", "BOM RETIRO", "CENTRO", "PARQUE DAS AMERICAS", "JARDIM INDUBERABA", "VILA OL√çMPICA", "JARDIM SAO BENTO", "VILA MARIA HELENA"]
            },
            {
                olt: "OLT ABADIA",
                vlan: "1207",
                cor: "#FF69B4",
                bairros: ["ABADIA", "NOSSA SENHORA DA ABADIA", "LEBLON", "VILA S√ÉO CRIST√ìV√ÉO", "JARDIM ELDORADO"]
            },
            {
                olt: "OLT ELIAS JO√ÉO 02",
                vlan: "1232",
                cor: "#FFD700",
                bairros: ["BOA VISTA", "COHAB BOA VISTA", "VILA BOA VISTA", "JARDIM ESPIRITO SANTO", "AMOROSO COSTA"]
            },
            {
                olt: "OLT ELIAS JO√ÉO 01",
                vlan: "1231",
                cor: "#800080",
                bairros: ["VILA MILITAR", "JARDIM ALEXANDRE CAMPOS", "VILA NOVA", "JARDIM DO BARREIRO", "ESTADOS UNIDOS", "Vila Frei Eug√™nio"]
            },
            {
                olt: "OLT DESTERRO",
                vlan: "1217",
                cor: "#DC143C",
                bairros: ["DESTERRO", "JARDIM PRIMAVERA", "CIDADE NOVA", "JARDIM ELZA AMUI", "ELZA AMU√ç", "ELZA AMUI I", "ELZA AMUI II", "ELZA AMUI III", "ELZA AMUI IV", "CONJUNTO MANOEL MENDES", "MANOEL MENDES", "RESIDENCIAL TANCREDO NEVES", "JARDIM BELO HORIZONTE", "ONEIDA MENDES", "ZEZE FERREIRA", "PARQUE DO MIRANTE", "JARDIM METROPOLE", "RESIDENCIAL 2000"]
            },
            {
                olt: "OLT TURIN",
                vlan: "1203",
                cor: "#00CED1",
                bairros: ["JARDIM IT√ÅLIA", "RECREIO DOS BANDEIRANTES", "JARDIM DO LAGO", "RESIDENCIAL RIO DE JANEIRO", "JARDIM MARACANA", "VILA PRESIDENTE VARGAS", "RESIDENCIAL VENEZA", "CIDADE OZANAN", "PARQUE DAS GAMELEIRAS", "CONJUNTO JOSE VALLIM DE MELO"]
            },
            {
                olt: "OLT LARANJEIRAS",
                vlan: "1200",
                cor: "#ff8c00",
                bairros: ["LARANJEIRAS", "PARQUE DAS LARANJEIRAS", "CHIT√ÉO", "CONJUNTO UBERABA", "JARDIM ALVORADA"]
            }
        ];

        async function verificar() {
            let cep = document.getElementById('cep').value.replace(/\D/g, '');
            let divRes = document.getElementById('resultado');

            if(cep.length !== 8) { alert("CEP Inv√°lido"); return; }
            divRes.innerHTML = "<p>Consultando...</p>";

            try {
                let req = await fetch(`https://viacep.com.br/ws/${cep}/json/`);
                let json = await req.json();

                if(json.erro) { 
                    divRes.innerHTML = "<p style='color: #ff5555'>CEP n√£o encontrado!</p>"; 
                    return; 
                }

                let bairroApi = json.bairro.normalize("NFD").replace(/[\u0300-\u036f]/g, "").toUpperCase();
                let achou = false;

                for(let item of baseDeDados) {
                    let encontrouBairro = item.bairros.some(b => {
                        let bLimpo = b.normalize("NFD").replace(/[\u0300-\u036f]/g, "").toUpperCase();
                        return bairroApi.includes(bLimpo) || bLimpo.includes(bairroApi);
                    });

                    if(encontrouBairro) {
                        divRes.innerHTML = `
                            <div class="card">
                                <h3>${json.logradouro}</h3>
                                <p class="info-bairro">Bairro: ${json.bairro}</p>
                                <div class="badge" style="background:${item.cor}">
                                    ${item.olt}<br>
                                    VLAN: ${item.vlan}
                                </div>
                            </div>
                        `;
                        achou = true;
                        break;
                    }
                }

                if(!achou) {
                    divRes.innerHTML = `
                        <div class="card">
                            <p>${json.logradouro}</p>
                            <div class="aviso">
                                ‚ö†Ô∏è <strong>OLT N√ÉO IDENTIFICADA</strong><br><br>
                                O sistema retornou o bairro:<br>
                                <h2>"${json.bairro}"</h2>
                                <br>
                                Verifique no mapa onde este bairro fica e adicione o nome 
                                <strong>"${json.bairro.toUpperCase()}"</strong> na lista do c√≥digo.
                            </div>
                        </div>
                    `;
                }
            } catch(e) {
                divRes.innerHTML = "<p>Erro de conex√£o ou API.</p>";
            }
        }
    </script>
</body>
</html>
